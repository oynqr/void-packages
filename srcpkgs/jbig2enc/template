# Template file for 'jbig2enc'
pkgname=jbig2enc
version=0.29
revision=1
build_style=gnu-configure
hostmakedepends="automake libtool"
makedepends="leptonica-devel"
short_desc="Encoder implementation of the JBIG2 image compression format"
maintainer="Philipp David <pd@3b.pm>"
license="Apache-2.0"
homepage="https://github.com/agl/jbig2enc"
changelog="https://github.com/agl/jbig2enc/blob/master/ChangeLog"
distfiles="https://github.com/agl/jbig2enc/archive/${version}.tar.gz"
checksum=bfcf0d0448ee36046af6c776c7271cd5a644855723f0a832d1c0db4de3c21280
python_version=3

# The patent situation is muddy around this program, see
# https://github.com/agl/jbig2enc/blob/master/doc/PATENTS
restricted=yes

pre_configure() {
	./autogen.sh
}

jbig2enc-devel_package() {
	short_desc+=" - development files"
	depends="libjbig2enc>=${version}_${revision}"
	pkg_install() {
		vmove usr/include
		vmove "usr/lib/*.a"
		vmove "usr/lib/*.so"
	}
}

libjbig2enc_package() {
	short_desc+=" - runtime library"
	pkg_install() {
		vmove "usr/lib/*.so.*"
	}
}
